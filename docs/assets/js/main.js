"use strict";const elementForm=document.querySelector("#form"),input=document.querySelector("#input"),btn=document.querySelector("#btn"),resultsList=document.querySelector("#resultsList"),favouriteList=document.querySelector("#favouriteList"),favouriteSeriesSection=document.querySelector("#favouriteSeries"),urlBase="http://api.tvmaze.com/search/shows?q=";let favouriteArray=[];const addNewFavourite=e=>{const t=document.createElement("li");t.classList.add("fav-item");const r=document.createElement("img");r.src=e.image;const a=document.createElement("span"),n=document.createTextNode(e.name);a.appendChild(n);const o=document.createElement("span");o.innerHTML='<i class="fas fa-times-circle"></i>',t.appendChild(r),t.appendChild(a),t.appendChild(o),favouriteList.appendChild(t)},getLocalStorage=()=>{if(null!==localStorage.getItem("object")){favouriteArray=JSON.parse(localStorage.getItem("object")),favouriteSeriesSection.classList.remove("hidden");for(const e of favouriteArray)addNewFavourite(e)}},selectShow=e=>{if(e.currentTarget.classList.toggle("selected"),favouriteSeriesSection.classList.remove("hidden"),!0===e.currentTarget.classList.contains("selected")){const t=e.currentTarget.firstChild.src,r={name:e.currentTarget.lastChild.innerHTML,image:t};favouriteArray.push(r),addNewFavourite(r),localStorage.setItem("object",JSON.stringify(favouriteArray))}},displayResults=e=>{resultsList.innerHTML="";for(const t of e){const e=t.show,r=document.createElement("li");r.classList.add("search-result-item");const a=document.createElement("img"),n=e.image;a.src=null===n?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":n.medium;const o=document.createElement("span"),s=document.createTextNode(e.name);o.appendChild(s),r.appendChild(a),r.appendChild(o),resultsList.appendChild(r),r.addEventListener("click",selectShow)}},connectToAPI=()=>{fetch(urlBase+input.value.toLowerCase()).then(e=>e.json()).then(e=>displayResults(e))},submitFormHandler=e=>{e.preventDefault(),connectToAPI()};elementForm.addEventListener("submit",submitFormHandler),btn.addEventListener("click",connectToAPI),window.addEventListener("load",getLocalStorage);